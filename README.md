# フードサービスシミュレーション

このプロジェクトは、オブジェクト指向プログラミング（OOP）の四大柱（カプセル化、抽象化、継承、ポリモーフィズム）を理解し練習するために、PHP を使用して簡易的なレストラン注文システムをシミュレーションするものです。

## プロジェクト概要

このプロジェクトでは、レストランのさまざまな側面をモデル化しています。これには、食品アイテム、顧客、従業員、およびレストラン自体が含まれます。主要なクラスには、`FoodItem`、`Person`、`Customer`、`Employee`、`Restaurant`、`FoodOrder`、および`Invoice`が含まれます。それぞれのクラスはシミュレーション内で特定の役割を果たし、レストランの運営（注文の受け付けや料理の準備など）を処理するために相互に連携します。

## ディレクトリ構造

```
root/
├── diagrams/
│   ├── class_diagram.png
├── docker/
│   ├── mysql/
│   │   └── my.cnf
│   ├── nginx/
│   │   └── default.conf
│   └── php/
│       ├── Dockerfile
│       └── php.ini
├── src/
│   ├── FoodItems/
│   │   ├── FoodItem.php
│   │   ├── HawaiianPizza.php
│   │   ├── Spaghetti.php
│   │   ├── Fettuccine.php
│   │   └── CheeseBurger.php
│   ├── People/
│   │   ├── Person.php
│   │   ├── Customers/
│   │   │   └── Customer.php
│   │   └── Employees/
│   │       ├── Employee.php
│   │       ├── Cashier.php
│   │       └── Chef.php
│   ├── Invoices/
│   │   └── Invoice.php
│   ├── Restaurants/
│   │   └── Restaurant.php
│   ├── db/
│   │   └── Database.php
│   └── index.php
├── compose.yml
├── .env
├── .gitignore
├── README.md
└── README.docker.md

```

## クラス説明

### FoodItem クラス

- **FoodItem**：食品アイテムの基本情報（名称、説明、価格）をカプセル化する抽象クラス。
  - **\_\_construct**：名称、説明、価格を設定します。
  - **getName**：アイテムの名称を取得します。
  - **getDescription**：アイテムの説明を取得します。
  - **getPrice**：アイテムの価格を取得します。
  - **getCategory**：カテゴリを取得する抽象メソッド。

### Person クラス

- **Person**：人物の基本情報（名前、年齢、住所）をカプセル化する抽象クラス。
  - **\_\_construct**：名前、年齢、住所を設定します。
  - **getName**：名前を取得します。
  - **getAge**：年齢を取得します。
  - **getAddress**：住所を取得します。

### Customer クラス

- **Customer**：具体的な人物クラスで、顧客を表します。
  - **\_\_construct**：名前、年齢、住所、興味のある味マップを設定します。
  - **interestedCategories**：レストランのメニューから興味のあるカテゴリを返します。
  - **order**：レストランに注文を行い、Invoice を返します。

### Employee クラス

- **Employee**：具体的な人物クラスで、従業員を表します。
  - **\_\_construct**：名前、年齢、住所、従業員 ID、給与を設定します。
  - **getEmployeeId**：従業員 ID を取得します。
  - **getSalary**：給与を取得します。

### Cashier クラス

- **Cashier**：具体的な従業員クラスで、レジ係を表します。
  - **generateOrder**：カテゴリに基づいて注文を生成し、FoodOrder を返します。
  - **generateInvoice**：注文に基づいて請求書を生成し、Invoice を返します。

### Chef クラス

- **Chef**：具体的な従業員クラスで、シェフを表します。
  - **prepareFood**：注文を受けて料理を準備します。

### Restaurant クラス

- **Restaurant**：レストランの全業務をカプセル化するクラス。
  - **\_\_construct**：メニューと従業員のリストを設定します。
  - **getMenu**：メニューを取得します。
  - **getEmployees**：従業員リストを取得します。
  - **order**：指定されたカテゴリに基づいて注文を処理し、Invoice を返します。

### FoodOrder クラス

- **FoodOrder**：注文を表すクラス。
  - **\_\_construct**：アイテムリストを設定し、注文時間を記録します。
  - **getItems**：注文アイテムのリストを取得します。
  - **getOrderTime**：注文時間を取得します。

### Invoice クラス

- **Invoice**：請求書を表すクラス。
  - **\_\_construct**：最終価格、注文時間、予想調理時間を設定します。
  - **getFinalPrice**：最終価格を取得します。
  - **getOrderTime**：注文時間を取得します。
  - **getEstimatedTimeInMinutes**：予想調理時間を取得します。
  - **printInvoice**：請求書の情報を出力します。

## 作成手順と課題

1. **ディレクトリ構成の設計**：

   - プロジェクトのディレクトリ構成を計画し、各クラスの配置場所を決定しました。

2. **クラスの実装**：

   - 各クラスを OOP の原則に従って実装しました。特に、抽象クラスと具象クラスの使用に注意しました。

3. **オートローディングの設定**：

   - `spl_autoload_register`を使用して、クラスの自動読み込みを設定しました。ファイルパスの設定と名前空間の管理に注意が必要でした。

4. **メインスクリプトの作成**：

   - `main.php`でシミュレーションを実行するためのコードを記述しました。ここでは、クラスのインスタンス化とメソッドの呼び出しを行いました。

5. **デバッグとテスト**：
   - クラスの相互作用をテストし、バグを修正しました。特に、オートローディングと名前空間に関連するエラーが発生しやすかったです。

### 手間取った点

- **作成手順と依存関係**: クラスの設計と実装に時間がかかりました。特に、クラス間の依存関係を正しく設定するのに苦労しました。
- **名前空間の管理**：クラス間の依存関係と名前空間の設定に細心の注意を払う必要がありました。
- **オートローディング**：クラスファイルのパスが正しく設定されていないと、クラスが見つからないエラーが発生しました。
- **メソッドの相互作用**：各メソッドが正しく連携するように設計するのに時間がかかりました。

プロジェクトを通じて、OOP の基本原則とそれを PHP でどのように実装するかについて深く理解することができました。次回の改善点として、ユニットテストの導入と、より複雑なシナリオのシミュレーション、DB を使用してデータの永続化を行いたいと考えています。
